services:
  api:
    # Build the image from the Dockerfile in the current directory
    build: .

    # Container name
    container_name: users-tasks-fastapi

    # Host the FastAPI application on port 8000
    ports:
      - "8000:8000"

    # Load environment variables from .env file
    env_file:
      - .env

    # Connect to the shared database network
    networks:
      - shared-db

    # Mount the current directory to /var/www in the container
    volumes:
      - .:/var/www

networks:
  shared-db:
    external: true
